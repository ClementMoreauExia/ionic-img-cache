!function(e){"use strict";function c(e,c,n){ImgCache.options.skipURIencoding=!0,ImgCache.options.debug=c.debug,ImgCache.options.localCacheFolder=c.folder,ImgCache.options.chromeQuota=1024*c.quota*1024,ImgCache.options.cacheClearSize=c.cacheClearSize,e.ready(function(){ImgCache.init(function(){c.debug&&n.info("ionicImgCache initialized")},function(){c.debug&&n.error("Failed to init ionicImgCache.")})})}function n(){var e=!1,c=50,n="ionic-img-cache",t=0;this.debug=function(c){e=!!c},this.quota=function(e){c=isFinite(e)?e:50},this.folder=function(e){n=""+e},this.cacheClearSize=function(e){t=isFinite(e)?e:0},this.$get=function(){return{debug:e,quota:c,folder:n,cacheClearSize:t}}}function t(c){function n(e){var n=c.defer();return u().then(function(){ImgCache.cacheFile(e,function(){ImgCache.isCached(e,function(e,c){n.resolve(e)},n.reject)},n.reject)}).catch(n.reject),n.promise}function t(e){var n=c.defer();return u().then(function(){ImgCache.isCached(e,function(e,c){c?n.resolve(e):n.reject()},n.reject)}).catch(n.reject),n.promise}function i(e){var n=c.defer();return u().then(function(){ImgCache.isCached(e,function(c,t){ImgCache.removeFile(e,function(){n.resolve()},n.reject)},n.reject)}).catch(n.reject),n.promise}function r(e){var n=c.defer();return u().then(function(){ImgCache.isCached(e,function(c,t){t?n.resolve(c):ImgCache.cacheFile(e,function(){ImgCache.isCached(e,function(e,c){n.resolve(e)},n.reject)},n.reject)},n.reject)}).catch(n.reject),n.promise}function o(e){var n=c.defer();return u().then(function(){ImgCache.isBackgroundCached(e,function(c,t){t?n.resolve(c):ImgCache.cacheBackground(e,function(){ImgCache.isBackgroundCached(e,function(e,c){n.resolve(e)},n.reject)},n.reject)},n.reject)}).catch(n.reject),n.promise}function a(){var e=c.defer();return u().then(function(){ImgCache.clearCache(e.resolve,e.reject)}).catch(e.reject),e.promise}function h(){var e=c.defer();return u().then(function(){e.resolve(ImgCache.getCurrentSize())}).catch(e.reject),e.promise}function u(){var n=c.defer();return ImgCache.ready?n.resolve():e.addEventListener("ImgCacheReady",function(){n.resolve()},!1),n.promise}return{add:n,get:t,remove:i,checkCacheStatus:r,checkBgCacheStatus:o,clearCache:a,getCacheSize:h}}function i(e){function c(c,n,t){t.$observe("ngSrc",function(c){e.checkCacheStatus(c).then(function(){ImgCache.useCachedFile(n)})})}return{restrict:"A",link:c}}function r(e){function c(c,n,t){e.checkBgCacheStatus(n).then(function(){ImgCache.useCachedBackground(n)}),t.$observe("ngStyle",function(){e.checkBgCacheStatus(n).then(function(){ImgCache.useCachedBackground(n)})})}return{restrict:"A",link:c}}c.$inject=["$ionicPlatform","ionicImgCache","$log"],t.$inject=["$q"],i.$inject=["ionImgCacheSrv"],r.$inject=["ionImgCacheSrv"],angular.module("ionicImgCache",["ionic"]).run(c).provider("ionicImgCache",n).factory("ionImgCacheSrv",t).directive("ionImgCache",i).directive("ionImgCacheBg",r)}(document);